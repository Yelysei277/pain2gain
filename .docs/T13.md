# T13 â€” Auth-Gated Feed & Functionality

**Goal:**
Ensure the ideas feed and all related actions (generation, subscriptions, notifications) are only accessible after the user signs in.

---

## ğŸ€ Deliverables

- Auth guard on the landing feed (`/`) and any other idea-related routes.
- API endpoints return `401 Unauthorized` for unauthenticated requests where appropriate.
- Redirect logic that sends anonymous users to `/auth`, optionally with a return URL.
- Documentation updates describing the gated flow.

---

## ğŸ›  Steps

1. **Evaluate current routing:**
   - Identify publicly accessible pages/components that should now require authentication (e.g., `HomePage`, `FeedClient`).
   - Determine whether the landing hero should remain public or if the entire experience is gated.
2. **Implement guard:**
   - Use server components (`createServerComponentClient`) or middleware to check for a session before rendering.
   - For client-only components, verify session state and show a loader/redirect if unauthenticated.
3. **Secure APIs:**
   - Confirm `/api/ideas`, `/api/generate`, `/api/subscriptions`, and `/api/notifications/*` enforce auth.
   - Return consistent JSON errors when unauthenticated.
4. **Update navigation:**
   - Ensure nav links donâ€™t expose restricted pages to logged-out users.
   - Optionally display a call-to-action encouraging login/signup.
5. **Docs & QA:**
   - Record the new behavior in `.docs/T13.md` (this file) and update README if needed.
   - Test the flow in both authenticated and anonymous states to verify redirects.

---

## ğŸ’¡ Notes

- Consider using Next.js middleware for a single source of truth if multiple routes need guarding.
- Maintain a good user experience by showing a friendly message before redirecting.
- Ensure the unsubscribe page stays public since itâ€™s used by email recipients.

