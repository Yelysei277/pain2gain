# T8 â€” Unsubscribe Flow

**Goal:**  
Allow users to safely unsubscribe from email digests via token link.

---

## ğŸ€ Deliverables

- Unsubscribe page `/unsubscribe?token=...`
- API logic to deactivate subscription

---

## ğŸ›  Steps

1. **Add `unsubscribe_token` in `subscriptions` table.**
   - Generate a unique token on creation.
   ```ts
   import { randomUUID } from 'crypto';
   const token = randomUUID();
   ```
2. **Include link in each email:**
   ```
   <a href="https://pain2gain.vercel.app/unsubscribe?token=${token}">Unsubscribe</a>
   ```
3. **Implement `/app/unsubscribe/page.tsx`:**
   - Parse `token` from query.
   - Call `/api/unsubscribe?token=${token}`.
4. **Create API route `/api/unsubscribe`:**
   - Update `is_active = false` for the matching token.
5. **Show simple success message:**
   ```
   âœ… You have successfully unsubscribed.
   ```

---

## ğŸ’¡ Notes

- Keep it simple and RESTful.
- Ensure tokens are one-time and unique.
