# T10 â€” Subscription Management UI

**Goal:**
Provide an in-app experience for users to create, update, or cancel their email subscriptions without leaving the profile section.

---

## ğŸ€ Deliverables

- Profile page form for managing subscription email and topic filters.
- Client-side calls to `/api/subscriptions` (POST/PUT) and `/api/unsubscribe`.
- Visible success and error messaging for each action.
- Graceful handling when Supabase credentials or subscriptions are unavailable.

---

## ğŸ›  Steps

1. **Design the form layout:**
   - Inputs for email address and multi-select topics (`devtools`, `health`, `education`, `finance`, `business`, `other`).
   - Buttons for â€œSave subscriptionâ€ and â€œUnsubscribeâ€.
2. **Wire up API interactions:**
   - Use `POST /api/subscriptions` to create a subscription when the user has none.
   - Use `PUT /api/subscriptions` to update topics for existing subscriptions.
   - Call `GET /api/subscriptions` on mount to preload the current state.
   - Trigger `GET /api/unsubscribe?token=...` server-side when the user requests to unsubscribe (requires storing the token locally or fetching it via the API response).
3. **State handling:**
   - Show loading indicators while requests are pending.
   - Display confirmation or error banners based on response codes.
4. **Edge cases:**
   - Hide the unsubscribe button if the subscription is already inactive.
   - Disable submission if required fields are empty or invalid.
   - Provide guidance when Supabase environment variables are missing.

---

## ğŸ’¡ Notes

- Reuse existing Supabase auth context to ensure the form is only accessible to logged-in users.
- Consider extracting a reusable hook (e.g., `useSubscription`) to encapsulate the API calls and state.
- Make sure the UI matches the minimalist styling used elsewhere (inline styles or shared utilities).

